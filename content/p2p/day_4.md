---
title: "روز چهارم - بیشتر مطالعه"
draft: false
---
امروز چهارمین روز از [این چالش](/blog/p2p) که جزو [پروژه‌ی ایکس من](/blog/x-project/) هستش بود.

 کاری که امروز که کردم این بود که از اون کتاب Learn You Some Erlang بخش OTPش ^[
OTP یک کتابخانه‌ی استاندارد Erlang هستش که اومده روی خیلی از نیازهای رایج، یک generalization و abstraction زده که بشه همه جا ازش استفاده کرد. مثلا باهاش راحت State Machine بسازید یا Event Handler طراحی کنید. خلاصه کارهای تکراری‌ی که تو همه‌ی اپلیکیشن‌ها هست رو اومده پیاده کرده که همه استفاده کنند]
رو بخونم. خیلی درگیر جزئیات نشدم و بیشتر سعی کردم بفهمم OTP چه قابلیت‌هایی داره که این اتفاق افتاد. ولی هنوز بلد نیستم با OTP کد بزنم که احتمالا دوباره مراجعه کنم به خود کتاب اوکی بشه. یک سری نکات کنکوری هم یاد گرفتم، مثل اینکه برای پیام‌های بین پروسه‌های ارلنگ، یک Reference بذارم که وقتی یک چیزی Receive شد، معلوم باشه جواب چه درخواست اولیه‌ای بوده. یه مقدار هم راجع به تکنیک‌های NAT Traversal ^[
NAT که مخفف Network Adress Translation هستش روشی هستش که کامپیوترهای یک شبکه‌ی داخلی، تحت یک IP مشترک عمومی در اینترنت شناسایی می‌شند. به عبارتی آدرس IP عمومی کامپیوتر و موبایل‌تون که به wifi خونه وصل هستش، با هم یکی هستش. یکی از دلایل این کار جلوگیری از تموم شدن IPهای ورژن ۴ هستش که الان معضلی شده. NAT باعث می‌شه که بدون وجود یک ارتباط Establish شده، نتونید Incoming connection قبول کنید و برای همین هستش که در حالت عادی من نمی‌تونم به لپتاپ شما داخل خونه‌تون مستقیم وصل شم. این قضیه کار رو برای اپلیکیشن‌های P2P خیلی سخت می‌کنه چرا که دیگه Nodeها نمی‌تونن به راحتی مستقیم بهم وصل بشند و این قضیه نرم‌افزار من رو هم تحت تاثیر قرار می‌ده. برای اطلاعات بیشتر می‌تونید [اینجا](https://en.wikipedia.org/wiki/Network_address_translation) و [اینجا](https://en.wikipedia.org/wiki/Carrier-grade_NAT) رو مطالعه کنید.
]
 خوندم. بعد هم یه مقدار راجع به مکانیزم‌های Node Discovery در شبکه‌های P2P مطالعه کردم چون این مساله همیشه تو اپلیکیشن‌های P2P، کلاینت‌ها قراره چطوری همدیگرو رو پیدا کنند.
^[
روش‌های مختلفی وجود داره. مثلا bittorrent با استفاده از trackerها این کار رو انجام می‌ده که سرورهایی هستند برای advertise کردن nodeها استفاده می‌شه. این سیستم‌ها دیگه fully decentralized نیستند. روش‌هایی که برای fully decentralized شدن هست، یکی‌ش مثلا flooding هستش که کل شبکه دست به دست هم می‌دن تا یک نفر رو پیدا کنند
]

راستی الان که دارم این پست رو می‌نویسم یه ایده‌ای به ذهنم رسید. الان هر کسی بخواد اپلیکیشن P2P بنویسه، کلی از دردسرهایی که داره، اصلا application level نیست و بیشتر زیرساختی هستش. مثلا از Node Discovery گرفته تا NAT Traversal. مستقل از اینکه اصلا اپلیکیشن چت هستش یا اشتراک فایل. ایده‌ای که به ذهنم رسید این بود که یک پروتکل P2P رو پیاده‌سازی کنیم در زبان‌های برنامه‌نویسی به عنوان library که خودش تمام این کارها رو بکنه. در درجه‌ی اول باید پروتکل‌ش خوش تعریف و general purpose بشه و بعد پیاده‌سازی بشه. خیلی دوست دارم روش کار کنم در آینده.

**آپدیت: ** مثکه [یه سری چیزا](https://pypi.python.org/pypi/pyp2p) هستش! (البته نمی‌دونم چقدر خوب یا کامل هستند)

** آپدیت دوم ** : الان با [IPFS](https://ipfs.io/) آشنا شدم و حقیقتا پشمام ریخت. می‌خوام بیشتر روش مطالعه کنم! 


درباره‌ی خود چالش اسفند، فعلا تصمیم دارم با فرض ساده‌سازی برم جلو و بعدا پیچیدگی اضافه کنم. به طور خاص فعلا می‌خوام فرض کنم که همه IP عمومی دارند و دیگه NAT Traversal لازم نیست. همچنین فعلا نمی‌خوام fully decentralized باشه و می‌خوام از Trackerها استفاده کنم. حالا باید بررسی کنم که Tracker رو خودم بنویسم یا اینکه از سرویس‌های آماده استفاده کنم ^[
مثلا یک روش خیلی معروفی که وجود داره بهش می‌گن IRC seeding که از کانال‌‌های پابلیک IRC استفاده می‌کنند که nodeها بیان خودشون رو advertise کنند. ورژن‌های قبلی Bitcoin از IRC seeding برای پیدا کردن nodeها در شبکه استفاده می‌کرد. روش‌های بیشتر رو از [اینجا](https://en.bitcoin.it/wiki/Satoshi_Client_Node_Discovery) می‌تونید ببینید
]

فردا ظهر دارم می‌رم مسافرت و تا شنبه نیستم (برای همین چالش رو زودتر از اسفند شروع کردم). احتمالا این کتاب learn you some erlang رو تو قطار سعی کنم آنلاین بخونم و از کلیت قضایا مطلع شم. برگشتم احتمالا شروع کنم به پیاده‌سازی قضیه. 
